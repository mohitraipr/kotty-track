<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Panel-wise View - Kotty Track</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; background: #f8f9fa; padding: 20px; }
    .container { max-width: 1600px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; }
    .btn-secondary { background: #6c757d; border: none; }
  </style>
</head>
<body>
  <div class="container">
    <div class="d-flex justify-content-between mb-4">
      <h2><i class="bi bi-diagram-3"></i> Panel-wise View</h2>
      <a href="/operator/dashboard" class="btn btn-secondary"><i class="bi bi-arrow-left"></i> Back</a>
    </div>
    <% if (panelData.length === 0) { %>
      <div class="alert alert-info"><i class="bi bi-info-circle"></i> No outward data found. No panels have been dispatched yet.</div>
    <% } else { %>
      <input type="text" id="searchInput" class="form-control mb-3" placeholder="Search panel, PO number...">
      <table class="table table-striped table-bordered">
        <thead>
          <tr><th>Panel Name</th><th>PO Number</th><th>Dispatch Date</th><th>Cartons</th><th>Total Qty</th><th>Creator</th></tr>
        </thead>
        <tbody id="panelTable">
          <% panelData.forEach(panel => { %>
            <tr>
              <td><strong><%= panel.panel_name %></strong></td>
              <td><%= panel.po_number %></td>
              <td><%= new Date(panel.dispatch_date).toLocaleDateString() %></td>
              <td><%= panel.carton_count %></td>
              <td><strong><%= panel.total_quantity || 0 %></strong></td>
              <td><%= panel.creator %></td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    <% } %>
  </div>
  <script>
    const searchInput = document.getElementById('searchInput');
    if (searchInput) {
      searchInput.addEventListener('keyup', function() {
        const filter = this.value.toLowerCase();
        const rows = document.querySelectorAll('#panelTable tr');
        rows.forEach(row => {
          const text = row.textContent.toLowerCase();
          row.style.display = text.includes(filter) ? '' : 'none';
        });
      });
    }
  </script>
</body>
</html>